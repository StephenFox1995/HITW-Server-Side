<!DOCTYPE html>
<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='jquery.resizableColumns.js') }}"></script>
    <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/jquery.resizableColumns.css') }}">

    <title>Events</title>
  </head>


  <body>

    <table class="table table-bordered" data-resizable-columns-id="event_table" id="event_table">
      <thead>
        <tr>
          <th data-resizable-column-id="event_title">Event Title</th>
          <th data-resizable-column-id="event_location">Event Location</th>
          <th data-resizable-column-id="event_time">Event Time</th>
          <th data-resizable-column-id="event_date">Event Date</th>

        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>


  </body>
</html>

<script>
$(document).ready(function(){
  $.ajax({
    type: "GET",
    url: '/get_all_events/',
    contentType: "application/json",
    dataType: "json",
    success: function(data) {
      $.each(data, function(index, element) {
          $.each(element, function(i, json){
            event_id =       json['identifier']
            event_title =    json['title']
            event_location = json['location']
            event_time =     json['time']
            event_date =     json['date']

            $('#event_table > tbody').append(
              '<tr><td>' + event_title + '</td>' +
              '<td>' + event_location + '</td>' +
              '<td>' + event_time + '</td>' +
              '<td>' + event_time + '</td> </tr>')
          });
        });
    },
    failure: function() {
      alert("Something went wrong.")
    }
  });
});
</script>
